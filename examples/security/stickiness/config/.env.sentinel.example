# Allow sentinel to trust the certificates generated by Caddy
NODE_EXTRA_CA_CERTS=/data/caddy/pki/authorities/local/root.crt
SSL_CERT_FILE=/data/caddy/pki/authorities/local/root.crt

# Run the sentinel as a root node and pin its identifier
FAME_ROOT=true
FAME_NODE_ID=Cb8WVCC4ML5RsFM

# Admission profile and credentials
FAME_ADMISSION_PROFILE=welcome
FAME_ADMISSION_SERVICE_URL=https://welcome/fame/v1/welcome/hello
FAME_ADMISSION_TOKEN_URL=https://oauth2-server/oauth/token
FAME_ADMISSION_CLIENT_ID=${DEV_CLIENT_ID}
FAME_ADMISSION_CLIENT_SECRET=${DEV_CLIENT_SECRET}
FAME_JWT_AUDIENCE=fame.fabric

# Strict overlay is required for sealed channels and stickiness metadata
FAME_SECURITY_PROFILE=strict-overlay
FAME_DEFAULT_ENCRYPTION_LEVEL=channel

# Trust welcome for JWT validation
FAME_JWT_TRUSTED_ISSUER=https://welcome/fame/welcome
FAME_JWKS_URL=https://welcome/fame/welcome/.well-known/jwks.json

# Certificate authority for sentinel identity issuance
FAME_CA_SERVICE_URL=https://ca/fame/v1/ca
FAME_CA_CERTS=/etc/fame/certs/root-ca.crt

# Ensure stickiness manager is enabled via plugin loading
FAME_PLUGINS=@naylence/runtime,@naylence/advanced-security
