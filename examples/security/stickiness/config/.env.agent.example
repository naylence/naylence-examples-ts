# SSL_CERT_FILE is required for the agent to trust the caddy-generated TLS certs
NODE_EXTRA_CA_CERTS=/data/caddy/pki/authorities/local/root.crt
SSL_CERT_FILE=/data/caddy/pki/authorities/local/root.crt

# Setting FAME_SECURITY_PROFILE to `strict-overlay` enables advanced security features.
FAME_SECURITY_PROFILE=strict-overlay
FAME_DEFAULT_ENCRYPTION_LEVEL=channel

# Admission profile and endpoints (advanced welcome flow)
FAME_ADMISSION_PROFILE=welcome
FAME_ADMISSION_SERVICE_URL=https://welcome/fame/v1/welcome/hello
FAME_ADMISSION_TOKEN_URL=https://oauth2-server/oauth/token

# OAuth2 client credentials (generated during `make init`)
FAME_ADMISSION_CLIENT_ID=${DEV_CLIENT_ID}
FAME_ADMISSION_CLIENT_SECRET=${DEV_CLIENT_SECRET}

# JWT configuration for the agent
FAME_JWKS_URL=https://welcome/fame/welcome/.well-known/jwks.json
FAME_JWT_AUDIENCE=fame.fabric
FAME_JWT_TRUSTED_ISSUER=https://oauth2-server

# CA service endpoints for SPIFFE-style certificates
FAME_CA_SERVICE_URL=https://ca/fame/v1/ca
FAME_CA_CERTS=/etc/fame/certs/root-ca.crt

# Helpful debugging defaults
FAME_SHOW_ENVELOPES=true

# Ensure the runtime loads the advanced security plugin
FAME_PLUGINS=@naylence/runtime,@naylence/advanced-security
