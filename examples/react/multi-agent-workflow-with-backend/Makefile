.DEFAULT_GOAL := start

build:
	@echo "ğŸ“¦ Installing backend dependencies..."
	@npm install
	@echo "ğŸ”¨ Building backend TypeScript sources..."
	@npm run build
	@echo "ğŸ³ Building Docker image..."
	@docker compose build

start: build
	docker compose up -d

stop:
	docker compose down --remove-orphans

run-browser:
	@echo "ğŸŒ Starting React frontend on http://localhost:3000"
	@cd browser && npm install && npm run dev

clean: stop
	@echo "ğŸ§¹ Cleaning build artifacts"
	@rm -rf node_modules dist browser/node_modules browser/dist

.PHONY: build start stop run-frontend clean
